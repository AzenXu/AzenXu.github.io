<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.46-DEV" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>1 Reactå‰ç«¯å·¥ç¨‹æ¶æ„ - åŸºæœ¬é…ç½® &middot; ç»†èƒçš„ä½œæˆ˜å®éªŒå®¤</title>

  
  <link type="text/css" rel="stylesheet" href="http://azen.me/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="http://azen.me/css/poole.css">
  <link type="text/css" rel="stylesheet" href="http://azen.me/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="http://azen.me/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="ç»†èƒçš„ä½œæˆ˜å®éªŒå®¤" />

  
</head>

  <body class=" ">
  <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://azen.me/"><h1>ç»†èƒçš„ä½œæˆ˜å®éªŒå®¤</h1></a>
      <p class="lead">
      Power by <a href="http://hugo.spf13.com">hugo</a>
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="http://azen.me/">Home</a> </li>
      <li><a href="/code/fe/"> FE </a></li><li><a href="/code/crack/"> iOSé€†å‘ </a></li><li><a href="/code/micro/"> å¾®æœåŠ¡ </a></li>
    </ul>

    <p>&copy; 2019. All rights reserved. </p>
  </div>
</div>

    <div class="content container">
    <div class="post">
  <h1>1 Reactå‰ç«¯å·¥ç¨‹æ¶æ„ - åŸºæœ¬é…ç½®</h1>
  <span class="post-date">Tue, Sep 18, 2018</span>
  <p>&nbsp;</p>         <h1>0x0 æ¦‚è¿°</h1><p>ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬èŠè¿‡ï¼Œå·¥ç¨‹æ¶æ„çš„ç›®æ ‡ï¼Œä¸»è¦æ˜¯ä¿è¯ã€Œå¼€å‘æ•ˆç‡ã€çš„ã€‚åŒ…æ‹¬ï¼š</p><ul><li>è§£æ”¾ç”Ÿäº§åŠ›</li><li>ç¯å¢ƒæ­å»º</li><li>è´¨é‡ä¿éšœ</li></ul><p>æœ¬ç¯‡æ–‡ç« ï¼Œå°†ä¼šå°±Reactçš„å®é™…é…ç½®åšä¸‹åšä¸‹åˆæ­¥è¯´æ˜</p><p>å†…å®¹åŒ…æ‹¬ï¼š</p><ul><li>npmã€webpackã€babelç¼–è¯‘æ‰“åŒ…åŸºç¡€é…ç½®</li><li>SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰åŸºç¡€é…ç½®</li><li>dev serverå®ç°ä»£ç å®æ—¶ç¼–è¯‘</li><li>hot moduleå®ç°ä»£ç çƒ­æ›´æ–°</li><li>æœåŠ¡ç«¯æ¸²æŸ“çš„å®æ—¶æ›´æ–°</li><li>eslintä¿è¯ä»£ç è´¨é‡</li></ul><h1>0x1 ç¼–è¯‘æ‰“åŒ…åŸºç¡€é…ç½®</h1><p><a href="https://gitee.com/azen/FE-execise/commit/3c250e9bb921ca3fdeaecd7b4ba995706a66baf4">æœ¬èŠ‚commit</a></p><h2>webpack</h2><p>webpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨ï¼Œæ ¸å¿ƒæ˜¯ä»–çš„loader</p><ul><li>é€šè¿‡loaderå¤„ç†æŸç§ç±»å‹çš„èµ„æºï¼ˆjsã€cssï¼‰</li><li>ä¼šæŠŠèµ„æºå¤„ç†æˆæµè§ˆå™¨èƒ½è¿è¡Œçš„ä»£ç ï¼ˆes5ï¼‰ï¼Œæµè§ˆå™¨é‡Œèƒ½å®Œæ•´ä½¿ç”¨</li><li>å¦‚æœæœ¨æœ‰å¯¹åº”ç±»å‹çš„loaderï¼Œå¯ä»¥è‡ªå·±å†™ä¸€ä¸ª<ul><li>å¦‚vueè‡ªå·±å†™äº†ä¸€ä¸ªloaderå¤„ç†å®ƒå®šä¹‰çš„ç‰¹æ®Šè¯­æ³•</li></ul></li></ul><h2>I åŸºç¡€é…ç½®é˜¶æ®µ</h2><p>1.åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼ŒæŠŠé¡¹ç›®é…ç½®æˆnpmçš„é¡¹ç›® - é€šè¿‡ç”Ÿæˆçš„package.jsonæ–‡ä»¶æè¿°ä¾èµ–çš„npmåŒ…</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="47b9c0e2-da40-4133-ae49-a53011df981d" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ npm init</pre></td></tr></table><p>ç›¸å…³é€‰é¡¹ - ä¸€èˆ¬æƒ…å†µä¸‹ç›´æ¥enterç”¨é»˜è®¤å€¼å°±å¥½</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="6f4b2008-be7b-43fb-bd4e-4583b36840c6" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{
  "name": "fe-execise",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "repository": {
    "type": "git",
    "url": "git@gitee.com:azen/FE-execise.git"
  },
  "author": "Azen",
  "license": "ISC"
}</pre></td></tr></table><p>2.å®‰è£…webpackã€react</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="9e1738b4-c297-49d2-bc98-ceff28fdd909" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ npm i webpack
$ npm i react</pre></td></tr></table><p>3.æ–°å»ºæ–‡ä»¶å¤¹ &amp; åˆå§‹æ–‡ä»¶</p><ul><li>buildæ–‡ä»¶å¤¹ï¼šæ”¾é…ç½®æ–‡ä»¶ä»¥åŠå·¥ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„è„šæœ¬æ–‡ä»¶<ul><li>webpack.config.js</li></ul></li><li>clientæ–‡ä»¶å¤¹ï¼šæ”¾å‰ç«¯app<ul><li>app.jsï¼šåº”ç”¨å…¥å£<ul><li>é‡Œé¢å¼•ç”¨äº†App.jsxï¼Œç„¶åæŠŠå®ƒmountåˆ°htmlä¸­</li></ul></li><li>App.jsxï¼šå£°æ˜æ•´ä¸ªé¡µé¢ä¸Šé¢çš„å†…å®¹</li></ul></li></ul><h3>webpack.config.js</h3><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="230cc1be-9510-4455-821c-82eb4f1bd354" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>const path = require('path');

module.exports = {
    //  å…¥å£
    entry: {
        app: path.join(__dirname, '../client/app.js')
    },
    output: {
        filename: '[name].[hash].js',
        path: path.join(__dirname, '../dist'),
        publicPath: "public/"
    }
};</pre></td></tr></table><p>pathåŒ…ï¼šæŠŠç›¸å¯¹è·¯å¾„è½¬æˆç»å¯¹è·¯å¾„ï¼Œé˜²æ­¢è·¨æ“ä½œç³»ç»Ÿæ—¶è·¯å¾„å‡ºé”™ - entry - å‘Šè¯‰webpackæ‰“åŒ…å…¥å£æ–‡ä»¶æ˜¯app</p><p>outputï¼š</p><ul><li>filename: æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶å<ul><li>ç®€å•çš„å¯ä»¥å†™æ­»app.jsè¿™ä¸ªåå­—</li><li>ä¸€èˆ¬è¿™æ ·å†™<ul><li>[]é‡Œé¢æ”¾å˜é‡ï¼š<ul><li>nameè¡¨ç¤ºentryä¸­å¯¹åº”çš„åå­—ï¼Œè¿™é‡Œæ˜¯app</li><li>hashæ˜¯æ‰“åŒ…å®Œåï¼Œå¯¹å†…å®¹åšçš„hash<ul><li>ä¸€æ—¦æ ‘ç›®å½•ä¸‹ä»»ä½•ä¸€ä¸ªæ–‡ä»¶å˜åŠ¨ï¼Œhashä¼šå˜</li><li>ä¼šæ›´æ–°æµè§ˆå™¨ç¼“å­˜</li></ul></li></ul></li></ul></li></ul></li><li>pathï¼šæ‰“åŒ…å¥½çš„è¾“å‡ºè·¯å¾„ - /distæ–‡ä»¶å¤¹ä¸‹</li><li>publicPathï¼šæŒ‡å®šé™æ€èµ„æºæ–‡ä»¶å¼•ç”¨æ—¶çš„è·¯å¾„Â <ul><li>ç”¨é€”ï¼šç”¨äºåŒºåˆ†urlå¯¹åº”çš„è¯·æ±‚ç›®æ ‡ï¼Œæ˜¯é™æ€èµ„æºè¿˜æ˜¯apiè¯·æ±‚ä¹‹ç±»çš„<ul><li>é…ç½®nginxçš„æ—¶å€™æ›´æ–¹ä¾¿åŒºåˆ†ï¼ˆæœ‰publicçš„å°±æŠŠé™æ€èµ„æºä¸¢è¿‡å»ï¼Œæ²¡çš„å°±ä¸¢ç»™apiæœåŠ¡å™¨ï¼‰</li></ul></li><li>ç”¨é€”äºŒï¼šéƒ¨ç½²åˆ°cdnä¸Šçš„è¯ï¼ŒpublicPathå†™cdnçš„åŸŸåå³å¯</li><li>åç»­è¿˜ä¼šçœ‹åˆ°å®ƒçš„æ•ˆæœ</li></ul></li></ul><p><br /></p><h3>package.json</h3><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="f82d036f-58d0-4cac-803c-ef67c2b12027" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{
  "name": "fe-execise",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
    "build": "webpack --config build/webpack.config.js"
  },
  "repository": {
    "type": "git",
    "url": "git@gitee.com:azen/FE-execise.git"
  },
  "author": "Azen",
  "license": "ISC",
  "dependencies": {
    "react": "^16.5.1",
    "webpack": "^4.19.0"
  },
  "devDependencies": {
    "webpack-cli": "^3.1.0"
  }
}</pre></td></tr></table><p>scrpits:</p><ul><li>å®šä¹‰buildå‘½ä»¤<ul><li>--configï¼šwebpackæŒ‡ä»¤çš„å‚æ•°ï¼Œç”¨äºæŒ‡å®šconfigæ–‡ä»¶</li></ul></li></ul><h3>ç®€å•æµ‹è¯•</h3><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="306f75b8-3bed-4241-8a98-33acd13f0f80" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ npm run build</pre></td></tr></table><p>ç»“æœï¼š</p><ul><li>ç”Ÿæˆdist/app.xxxxhashxxxx.jsæ–‡ä»¶ï¼Œå°±æ˜¯æ‰“åŒ…å¥½çš„æ–‡ä»¶äº†</li><li>ç”Ÿæˆçš„jsæ–‡ä»¶ï¼š<ul><li>å‰é¢éƒ¨åˆ†æ˜¯webpackå¤„ç†æ¨¡å—æ—¶åŠ çš„ä¸œä¸œï¼Œä¸ç”¨ç®¡å®ƒ</li><li>åº•éƒ¨ä¼šæ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ç›¸å…³é€»è¾‘</li></ul></li></ul><h2>II ç®€å•ä¸šåŠ¡æ–‡ä»¶ &amp; å…¥å£æ–‡ä»¶å®ç°</h2><p>App.jsx</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="67d958ee-79f1-4234-bca8-5e7050733fec" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>import React from 'react'

export default class App extends React.Component {
    render() {
        return (
            &lt;div>åˆæ¬¡è§é¢ï¼Œè¯·å¤šå…³ç…§~(à¹‘^Úº^à¹‘)&lt;/div>
        )
    }
}</pre></td></tr></table><p>app.js</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="462358e3-f666-4780-bd8a-2b88782d8a1d" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ npm i react-dom -S</pre></td></tr></table><ul><li>-Sï¼šsaveï¼Œç”Ÿäº§ç¯å¢ƒä¾èµ–</li><li>-Dï¼šsave-devï¼Œå¼€å‘ç¯å¢ƒä¾èµ–</li></ul><p><br /></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="b77cbdfd-21b9-4ccb-8211-04a8053856c6" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>import ReactDOM from 'react-dom'
import App from './App.jsx'
import React from "react";

ReactDOM.render(&lt;App />, document.body);</pre></td></tr></table><p>é…ç½®ï¼š</p><ul><li>react-domæ˜¯ç”¨æ¥æŠŠreactçš„ç»„ä»¶æ¸²æŸ“åˆ°domä¸Šç”¨çš„<ul><li>å’Œå®ƒå¯¹åº”çš„ï¼Œreact-nativeæ˜¯æŠŠç»„ä»¶æ¸²æŸ“åˆ°æ‰‹æœºç«¯</li></ul></li><li>import App.jsx:<ul><li>ç›®å‰æ²¡é…webpackå¿½ç•¥åç¼€åï¼Œæ‰€ä»¥éœ€è¦å†™jsxåç¼€å</li></ul></li><li>import Reactï¼š<ul><li>è¿™é‡Œä¸€å®šè¦å¼•Reactçš„åŸå› ï¼š<ul><li>æ¯ä¸€ä¸ªjsxçš„æ ‡ç­¾ï¼ˆ&lt;App /&gt;ï¼‰ï¼Œæœ¬è´¨éƒ½æ˜¯æŠŠæ ‡ç­¾å†…å®¹ä½œä¸ºå‚æ•°ï¼Œä¼ ç»™reactåº“ä¸­çš„create_elementæ–¹æ³•ï¼Œè¿›è€Œç”ŸæˆçœŸæ­£æ ‡ç­¾</li></ul></li></ul></li></ul><p><br /></p><p><strong>webpack.config.js</strong></p><p>éœ€è¦ç»™webpacké…ç½®ï¼Œè®©å®ƒèƒ½è¯†åˆ«reactç›¸å…³è¯­æ³• - jsxæ–‡ä»¶å’Œä¸€äº›æˆ‘ä»¬è‡ªå®šä¹‰çš„jsæ–‡ä»¶ä¸­ä¼šç”¨åˆ°reactè¯­æ³•</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="56ed3911-8c1c-4ed8-a847-a7dbc9b78ac8" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>module.exports = {
    ...
    module: {
        rules: [
            {
                test: /.(jsx|js)$/,
                loader: 'babel-loader',
                exclude: [
                    path.join(__dirname, '../node_modules')
                ]
            }
        ]
    },
};</pre></td></tr></table><p>é…ç½®ï¼š</p><ul><li>rulesæ•°ç»„ï¼šé‡Œé¢é…å¾ˆå¤šloader<ul><li>testï¼šå‘Šè¯‰å®ƒå“ªç§ç±»å‹çš„æ–‡ä»¶éœ€è¦ç¼–è¯‘ - ä»¥.jsxæˆ–.jsä½œä¸ºç»“å°¾çš„æ–‡ä»¶</li><li>loaderï¼šæŒ‡å®šä½¿ç”¨ã€Œbabel-loaderã€ä½œä¸ºloader</li><li>excludeï¼šéœ€è¦æ’é™¤çš„æ–‡ä»¶ - node_modulesæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ - è¿™äº›éƒ½æ˜¯ä¸‰æ–¹åº“æ–‡ä»¶ï¼Œæœ¬èº«å·²ç»è¢«ç¼–è¯‘è¿‡äº†</li></ul></li></ul><p><br /></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="6f838041-76c1-4d40-a2c4-c2cd5f1a9c63" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ npm i babel-loader@7 babel-core -D</pre></td></tr></table><p><strong>babel</strong></p><p>æ˜¯ä¸€ä¸ªèƒ½ç¼–è¯‘å„ç§jsè¯­æ³•çš„å·¥å…·ï¼Œç¼–è¯‘å‡ºæ¥çš„æ˜¯æµè§ˆå™¨é‡Œé»˜è®¤èƒ½æ‰§è¡Œçš„es5è¯­æ³•</p><ul><li>babelèƒ½æ”¯æŒjsxã€es7ã€tsç­‰ç­‰</li><li>ä»¥å‰çš„ç¼–è¯‘å™¨complieræ˜¯reactå®˜æ–¹è‡ªå·±åšçš„ç¼–è¯‘å·¥å…·ï¼Œç°åœ¨ç›´æ¥ç”¨babelå°±å¥½</li></ul><p>bable-loaderï¼šæ˜¯ä¸€ä¸ªwebpackæ’ä»¶ï¼Œä¸åŒ…å«babelçš„æ ¸å¿ƒä»£ç ï¼Œéœ€è¦å†å®‰è£…ä¸‹ã€Œbabel-coreã€</p><ul><li><p>å› ä¸ºä¾èµ–ç‰ˆæœ¬é—®é¢˜ï¼Œè¿™é‡Œéœ€è¦æŒ‡å®šä¸‹babel-loader@7</p></li></ul><p>babelé»˜è®¤åªèƒ½ç¼–è¯‘es6çš„ä»£ç ï¼Œä¸èƒ½ç¼–è¯‘jsxï¼Œéœ€è¦åœ¨æ ¹ç›®å½•å†™ä¸‹é…ç½®æ–‡ä»¶`.babelrc`</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="f341ecad-a405-49ac-adf4-c48b9fc48b88" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{
  "presets": [
    ["es2015", {"loose": true}],
    "react"
  ]
}</pre></td></tr></table><p>é…ç½®ï¼š</p><ul><li>presetsï¼šé…ç½®æ”¯æŒçš„è¯­æ³•<ul><li><span style="color: rgb(128,128,128);">babelé»˜è®¤æŠŠæ‰€æœ‰è¯­æ³•æ‹†åˆ†å‡ºå»äº†ï¼Œbabel coreæ²¡åŒ…å«è¯­æ³•ç›¸å…³å¼•æ“</span></li><li>es2015ï¼ˆå°±æ˜¯es6ï¼‰ï¼Œloose trueæ˜¯æŒ‡æ¾æ•£å‹çš„è¯­æ³•</li><li>react</li></ul></li></ul><p>å®‰è£…babelè¯­æ³•å¼•æ“</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="92e37de8-ab77-4fea-a2e4-1b5983fcef23" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>npm i babel-preset-es2015 babel-preset-es2015-loose babel-preset-react -D</pre></td></tr></table><h3>ç®€å•æµ‹è¯•</h3><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="42187d25-98ee-4d0a-9e3c-05b736da4cdb" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>npm run build</pre></td></tr></table><p>ç»“æœï¼š</p><ul><li>ç¼–è¯‘å‡ºæ¥ä¸€ä¸ªéå¸¸å¤§çš„æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰reactæºä»£ç </li></ul><h2>æµè§ˆå™¨å±•ç¤º</h2><p>å¸Œæœ›åœ¨æµè§ˆå™¨ä¸­å±•ç¤ºjsæ•ˆæœï¼Œéœ€è¦å®‰è£…html-webpack-plugin</p><p>ä½œç”¨ï¼š</p><ol><li>ç”Ÿæˆä¸€ä¸ªhtmlå…¥å£é¡µé¢</li><li>åœ¨webpackç¼–è¯‘çš„æ—¶å€™ï¼Œæ‰€æœ‰entryéƒ½æ³¨å…¥åˆ°è¿™ä¸ªhtmlå…¥å£é¡µé¢ä¸­ï¼ˆåœ¨htmlä¸­åšå¼•ç”¨ï¼‰</li><li>è·¯å¾„ä¼šæ ¹æ®æˆ‘ä»¬webpacké…ç½®çš„publicPathæ‹¼æ¥è€Œæˆçš„</li></ol><p>å®‰è£…ï¼š</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="3c3fa0d8-02bf-44b5-bd71-c63929e79334" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ npm i html-webpack-plugin -D</pre></td></tr></table><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒæŠŠæ’ä»¶é…ç½®ç»™webpack</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="57d6da7f-f0d7-4fcc-bdbd-f311b7be07cd" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>const HTMLPlugin = require('html-webpack-plugin');

module.exports = {
    ...
    plugins: [
        new HTMLPlugin()
    ]
};</pre></td></tr></table><p>æ•ˆæœï¼š</p><ul><li>åœ¨ç”Ÿæˆçš„å…¥å£htmlä¸­æ³¨å…¥äº†æ‰“åŒ…å¥½çš„jsæ–‡ä»¶å¼•ç”¨ - ä¸”æ‹¼æ¥äº†publicPathé…ç½®ä¸­çš„å‰ç¼€<ul><li>å› ä¸ºæ²¡èµ·ä»»ä½•æœåŠ¡ï¼Œä¹Ÿæ²¡åšè·¯å¾„æ˜ å°„ï¼Œç›´æ¥æ‰“å¼€è¿™ä¸ªhtmlæ˜¯æ— æ³•è®¿é—®åˆ°æˆ‘ä»¬çš„jsæ–‡ä»¶çš„ï¼ˆå› ä¸ºçœŸå®æ–‡ä»¶è·¯å¾„ä¸­ï¼Œdistç›®å½•ä¸‹ï¼Œjsæ–‡ä»¶å’Œå…¥å£htmlæ–‡ä»¶åŒçº§ï¼ŒçœŸå®ç›®å½•ä¸­æ²¡æœ‰ã€Œpublic/ã€è¿™ä¸€å±‚ï¼‰</li><li>ä¸ºäº†å±•ç¤ºæ•ˆæœï¼Œå¯ä»¥æš‚æ—¶æ³¨é‡Šæ‰publicPathé…ç½®</li></ul></li></ul><h2>æœ€ç»ˆç»“æœ</h2><p><img class="confluence-embedded-image confluence-external-resource" width="386" src="http://img.daker.wang/wiki/1537252547181.png" data-image-src="http://img.daker.wang/wiki/1537252547181.png"></p><p><img class="confluence-embedded-image confluence-external-resource" width="386" src="http://img.daker.wang/wiki/1537252620632.png" data-image-src="http://img.daker.wang/wiki/1537252620632.png"></p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œæºä»£ç é‡Œåªæœ‰ä¸€å¥jså¼•ç”¨ï¼Œæœ¨æœ‰æˆ‘ä»¬åœºæ™¯çš„&lt;a&gt;&lt;p&gt;ç­‰æ ‡ç­¾ï¼Œè¿™æ ·å¯¹SEOä¸åˆ© - èœ˜è››è®¤ä¸ºæˆ‘ä»¬çš„ç½‘ç«™ä¸­æœ¨æœ‰å†…å®¹</p><p>ä¸‹ä¸€èŠ‚è§£å†³è¿™ä¸ªé—®é¢˜</p><h1>0x2 æœåŠ¡ç«¯æ¸²æŸ“åŸºç¡€é…ç½®</h1><p><a href="https://gitee.com/azen/FE-execise/commit/bb38a7525eee207025316433ab5cd4a00c2fc4a2">æœ¬èŠ‚commit</a></p><h2>0 æ¦‚è¿°</h2><p>webappå¼€å‘æ¨¡å¼ä¸‹ï¼Œéƒ½æ˜¯åœ¨æµè§ˆå™¨ç«¯ä½¿ç”¨jså®æ—¶æ¸²æŸ“å‡ºæ¥å†…å®¹çš„</p><p><strong>é—®é¢˜ï¼š</strong></p><ol><li>SEOä¸å‹å¥½<ul><li>æ ¹æ®urlè¯·æ±‚åˆ°çš„htmlæ˜¯ç©ºç™½é¡µé¢</li><li>èœ˜è››ä¼šè®¤ä¸ºç½‘ç«™æ²¡ä¸œè¥¿</li></ul></li><li>é¦–æ¬¡åŠ è½½æ—¶é—´é•¿ï¼Œä½“éªŒä¸å¥½</li></ol><p><strong>è§£å†³æ€è·¯</strong>ï¼š</p><p style="margin-left: 30.0px;"><span style="color: rgb(153,51,0);"><strong>æœåŠ¡ç«¯æ¸²æŸ“</strong></span>ï¼šåœ¨æœåŠ¡ç«¯çš„nodejsç¯å¢ƒä¸‹ï¼Œæå‰åšå¥½æ¸²æŸ“ï¼Œå¾—åˆ°è¦è®¿é—®é¡µé¢çš„htmlå†…å®¹ï¼Œè¿”å›ç»™æµè§ˆå™¨</p><p><strong>å¯ç”¨å·¥å…·</strong>ï¼š</p><ul><li>react-domè§£å†³æ–¹æ¡ˆ<ul><li>å®¢æˆ·ç«¯ä½¿ç”¨react-domåœ¨æµè§ˆå™¨ä¸­åšé¡µé¢æ¸²æŸ“</li><li>æœåŠ¡ç«¯ä½¿ç”¨react-domä¸‹é¢çš„serveræ¨¡å—ï¼Œåœ¨æœåŠ¡ç«¯åšæ¸²æŸ“</li></ul></li></ul><h2>I ä»£ç è°ƒæ•´é˜¶æ®µ</h2><p>ä¹‹å‰app.jsæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠAppç›´æ¥mountåˆ°document.body</p><p>é—®é¢˜ï¼šæœåŠ¡ç«¯è¿è¡Œç¯å¢ƒä¸­æœ¨æœ‰documentï¼Œè¿™ä¸ªä¸œä¸œåªæœ‰æµè§ˆå™¨ç«¯æœ‰</p><p>è§£æ³•ï¼šå®šä¹‰server-entry.jsæ–‡ä»¶ä½œä¸ºæœåŠ¡ç«¯æ¸²æŸ“å…¥å£æ–‡ä»¶</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="cd4b0dc4-573f-423e-9598-1d6e61aa3b48" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>import App from './App.jsx'
import React from "react"

export default &lt;App /></pre></td></tr></table><p><br /></p><ul><li>ä¹Ÿéœ€è¦æ‰“åŒ…å’Œç¼–è¯‘<ul><li>å› ä¸ºjsxä¸èƒ½ç›´æ¥åœ¨nodejsç¯å¢ƒä¸‹æ‰§è¡Œ</li></ul></li></ul><p>é…ç½®ï¼šæ–°å»ºä¸€ä¸ªwebpacké…ç½®æ–‡ä»¶ï¼Œç”¨æ¥åšæœåŠ¡ç«¯ç¼–è¯‘é…ç½®</p><p><span>build/webpack.config.server.js</span></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="2be883dd-6c1e-483d-a715-78d00abad886" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>const path = require('path');

module.exports = {
    target: 'node',
    entry: {
        app: path.join(__dirname, '../client/server-entry.js')
    },
    output: {
        filename: 'server-entry.js',
        path: path.join(__dirname, '../dist'),
        publicPath: '',
        libraryTarget: 'commonjs2'
    },
    module: {
        rules: [
            {
                test: /.(jsx|js)$/,
                loader: 'babel-loader',
                exclude: [
                    path.join(__dirname, '../node_modules')
                ]
            }
        ]
    }
};</pre></td></tr></table><p>è¯´æ˜ï¼š</p><ul><li>targetï¼šé…ç½®æ‰“åŒ…å‡ºæ¥çš„å†…å®¹åœ¨ä»€ä¹ˆç¯å¢ƒä¸­æ‰§è¡Œçš„<ul><li>webï¼ˆæµè§ˆå™¨ç«¯ï¼‰</li><li>nodeï¼ˆnodejsç¯å¢ƒï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼‰</li></ul></li><li>filenamï¼šæœåŠ¡ç«¯æ²¡æœ‰ç¼“å­˜æ¦‚å¿µï¼Œä¸éœ€è¦hashï¼Œå†™æ­»å°±å¥½</li><li>libraryTargetï¼šæ‰“åŒ…å‡ºæ¥çš„jsä½¿ç”¨çš„æ¨¡å—æ–¹æ¡ˆ(module)<ul><li>æŒ‡å®šä¸ºcommonjs2ï¼ˆè¿˜æœ‰umd amdå•¥çš„...ï¼‰</li><li>ä½¿ç”¨commonjs2çš„æ¨¡å—åŠ è½½æ–¹æ¡ˆï¼Œé€‚ç”¨äºnodejsç«¯</li></ul></li><li>pluginï¼šè¿™ä¸ªä¸éœ€è¦ï¼Œä¸ç”¨ç”Ÿæˆä¸€ä¸ªhtmlæ–‡ä»¶</li></ul><p>æ„å»º</p><p>å…ˆå®‰è£…ä¸€ä¸ªåˆ é™¤æ–‡ä»¶å¤¹çš„å°å·¥å…·</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="a4de1e19-b77f-44f2-84ad-f38cd6f6630c" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ npm i rimraf -D</pre></td></tr></table><p>å®šä¹‰æ„å»ºæ–¹æ³•ï¼š</p><p>package.json</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="05299b38-378b-411d-81af-d30f0099f9ad" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{
  ...
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
    "clear": "rimraf dist",
    "build:client": "webpack --config build/webpack.config.client.js",
    "build:server": "webpack --config build/webpack.config.server.js",
    "build": "npm run clear &amp;&amp; npm run build:client &amp;&amp; npm run build:server"
  },
  ...
}</pre></td></tr></table><p>åœ¨buildä¹‹å‰ï¼Œå…ˆæŠŠdiståŒ…æ¸…ç©ºä¸‹ï¼Œåˆ æ‰å†å²æ‰“çš„jsåŒ…ï¼Œé¿å…ç¼–è¯‘ç»“æœæ±¡æŸ“</p><h3>æ„å»ºç»“æœ</h3><p>ç”Ÿæˆäº†ä¸‰ä¸ªæ–‡ä»¶</p><p>æœåŠ¡ç«¯æ‰“åŒ…å‡ºæ¥çš„server-entry.jsæ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥æ”¾åœ¨node.jsç¯å¢ƒä¸­åšæ¸²æŸ“ï¼Œç”Ÿæˆå¯¹åº”çš„htmlæ–‡ä»¶</p><p>ç®€ç•¥çœ‹ä¸‹æ‰“åŒ…å‡ºæ¥çš„server-entry.jsæ–‡ä»¶</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="78fc54db-2643-4f9d-ab74-ea8c4984c1d4" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>module.exports=function(e){...xxxxxx...}</pre></td></tr></table><h2>II é…ç½®æ¸²æŸ“æœåŠ¡å™¨ï¼Œæ„å»ºnodejsæ¸²æŸ“ç¯å¢ƒ</h2><p>éœ€è¦èµ·ä¸€ä¸ªnodejsç½‘ç»œæœåŠ¡ï¼Œä½¿ç”¨expressä½œä¸ºç½‘ç»œæœåŠ¡æ¡†æ¶</p><p><a href="http://www.expressjs.com.cn/4x/api.html">expressæ–‡æ¡£</a></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="8646a6c8-ec09-42b0-862e-d68486515b98" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ npm i express -S</pre></td></tr></table><h3>å®ç°æ¸²æŸ“æœåŠ¡å™¨</h3><p>åˆ›å»ºserveræ–‡ä»¶å¤¹ï¼Œæ”¾webæœåŠ¡ç›¸å…³ä»£ç </p><p>å®ç°server.jsæ–‡ä»¶ï¼Œç”¨æ¥å®ç°webæœåŠ¡ç›¸å…³é€»è¾‘</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="663e23a8-1e03-4038-9418-51a3fb694cf2" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>const express = require('express');
const ReactSSR = require('react-dom/server');
const serverEntry = require('../dist/server-entry.js').default;

const app = express();

app.get('*', function (req, res) {
    const appString = ReactSSR.renderToString(serverEntry);
    res.send(appString)
});

app.listen(2333, function () {
   console.log('ğŸš€ æœåŠ¡èµ·æ¥äº†ï¼Œæ­£åœ¨ç›‘å¬2333ç«¯å£(âœŒï¾Ÿâˆ€ï¾Ÿ)â˜')
});</pre></td></tr></table><ul><li>éœ€è¦å¼•ç”¨è¿‡æ¥react-dom/serverè¿™ä¸ªåŒ…ï¼Œç”¨æ¥åšhtmlæœåŠ¡ç«¯æ¸²æŸ“</li><li>ä»»ä½•è¯·æ±‚è¿‡æ¥ï¼Œéƒ½ç”¨SSRæ¸²æŸ“ä¹‹å‰ç”¨webpack buildå¥½çš„å¾…æ¸²æŸ“server-entry.jsæ–‡ä»¶ï¼Œè¿”è¿˜ç»™è¯·æ±‚è€…</li><li>ç”±äº/dist/server-entry.jsä½¿ç”¨commonjs2çš„æ–¹å¼ç¼–è¯‘ï¼Œå¯¼å‡ºæ–¹æ³•ä¸ºmodules.exports=xxxï¼Œæ•…nodejsä¸­requireçš„æ—¶å€™ï¼Œéœ€è¦è¿½åŠ .defaultï¼Œå¦åˆ™ä¼šæŠ¥é”™</li></ul><p>npmä¸­é…ç½®èµ·è¿™ä¸ªæœåŠ¡çš„script</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="722283a1-6cbf-4750-bb1b-71cd089c2c00" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{
    ...
  "scripts": {
    ...
    "web:start": "node server/server.js"
  }
    ...
}</pre></td></tr></table><h3>æ¸²æŸ“å†…å®¹ä¸å®Œæ•´</h3><p><img class="confluence-embedded-image confluence-external-resource" width="286" src="http://img.daker.wang/wiki/1537260308632.png" data-image-src="http://img.daker.wang/wiki/1537260308632.png"></p><p><strong>é—®é¢˜</strong></p><p>è™½ç„¶æ¸²æŸ“å‡ºäº†åŸºç¡€çš„å†…å®¹ ï¼Œä½†æ˜¯è¿™ä¸ªä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„å®Œæ•´å†…å®¹ï¼š</p><ol><li>æ²¡æœ‰è¿™ä¸ªé¡µé¢çš„jsæ–‡ä»¶å¼•ç”¨</li><li>ä¸æ˜¯å®Œæ•´çš„htmlæ–‡ä»¶ï¼Œåªæœ‰ä¸€è¡Œè¯­å¥</li></ol><p><strong>æ€è·¯</strong></p><p>æŠŠæœåŠ¡ç«¯æ¸²æŸ“å‡ºæ¥çš„htmlæ ‡ç­¾å†…å®¹ï¼Œæ‹¼æ¥åˆ°ç¼–è¯‘æ‰“åŒ…å¥½çš„å®¢æˆ·ç«¯index.htmlæ–‡ä»¶çš„æŒ‡å®šä½ç½®ï¼Œç„¶åæŠŠæ‹¼æ¥åçš„å†…å®¹è¿”å›ç»™æµè§ˆå™¨</p><p><strong>æ–¹æ¡ˆ</strong></p><ul><li>åœ¨clientæ–‡ä»¶å¤¹ä¸‹å†™ä¸ªæ¨¡æ¿æ–‡ä»¶template.html</li><li>æ¸²æŸ“çš„æ—¶å€™ï¼ŒæŠŠæ¨¡æ¿æ–‡ä»¶ä¸­çš„å ä½æ–‡æœ¬ï¼ˆå¦‚&lt;&gt;ï¼‰æ›¿æ¢æˆæœåŠ¡ç«¯æ¸²æŸ“å‡ºæ¥çš„ä¸œä¸œ</li></ul><p>template.html</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="df075cb0-e2f2-4893-8655-f260be259b28" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;!DOCTYPE html>
&lt;html>
&lt;head>
    &lt;meta charset="UTF-8">
    &lt;title>Webpack App&lt;/title>
&lt;/head>
&lt;body>
&lt;div id="root">
    &lt;app>&lt;/app>
&lt;/div>
&lt;/body>
&lt;/html></pre></td></tr></table><p>app.js</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="27ddd005-1b02-41e5-8922-ce08314d006e" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>...
ReactDOM.render(&lt;App />, document.getElementById("root"));</pre></td></tr></table><p>webpack.config.client.js</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="4e0efaf1-9dc0-4e7a-b938-273eee809124" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>...
plugins: [
    new HTMLPlugin({
         template: path.join(__dirname, '../client/template.html')
    })
]</pre></td></tr></table><p>server.js</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="765cf4ab-ead0-4a11-b02a-d56e8da46c41" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>...
const fs = require('fs');
const path = require('path');
const template = fs.readFileSync(path.join(__dirname, '../dist/index.html'), 'utf-8');
...
app.use('/public', express.static(path.join(__dirname, '../dist')));
app.get('*', function (req, res) {
    const appString = ReactSSR.renderToString(serverEntry);
    res.send(template.replace('&lt;app>&lt;/app>', appString))
});
...</pre></td></tr></table><p>è¯´æ˜ï¼š</p><ul><li>éœ€è¦æŠŠindex.htmlè¯»è¿›æ¥ï¼Œæ³¨æ„æŒ‡å®šè¯»å–çš„æ–‡æœ¬æ ¼å¼ä¸ºutf8<ul><li>éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œè¦è¯»çš„ï¼Œæ˜¯dist/index.htmlï¼Œæ˜¯ç¼–è¯‘å¥½çš„htmlå…¥å£æ–‡ä»¶ï¼Œè€Œéç›´æ¥è¯»client/template.html</li></ul></li><li>app.useå¥ï¼š<ul><li>é…ç½®urlä¸­/publicä¸‹çš„å†…å®¹ï¼Œä¸ºè®¿é—®é™æ€èµ„æº</li><li>æŒ‚è½½é™æ€èµ„æºè®¿é—®è¯·æ±‚ï¼Œåˆ°../distç›®å½•ä¸‹</li><li>ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢é™æ€èµ„æºè·å–ç±»è¯·æ±‚ï¼ˆxxx.jsçš„è¯·æ±‚ï¼‰ï¼Œä¹Ÿè¢«app.getç›¸å…³è§„åˆ™é™åˆ¶ä½</li><li>éœ€è¦åœ¨webpacké…ç½®æ–‡ä»¶ä¸­æŒ‡å®špublicPathä¸º/publicï¼Œä¸è¿™é‡Œä¸€è‡´</li></ul></li><li>æŠŠæ¨¡æ¿ä¸­çš„å ä½æ ‡ç­¾æ›¿æ¢æ‰</li></ul><p>webpack.config.xxx.js</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="e7d667df-f421-4bf8-b16a-c0179331853c" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=zh_CN&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>...
output: {
    ...
    publicPath: '/public'
},
...</pre></td></tr></table><p><strong>é…ç½®ç»“æœ</strong></p><p><img class="confluence-embedded-image confluence-external-resource" width="386" src="http://img.daker.wang/wiki/1537263606454.png" data-image-src="http://img.daker.wang/wiki/1537263606454.png"></p><h2>III é—®é¢˜</h2><ol><li>æ¯æ¬¡ä¿®æ”¹äº†clientç›®å½•ä¸‹çš„ä»£ç ï¼Œéƒ½éœ€è¦é‡æ–°buildä¸€éæ‰èƒ½ç”Ÿæ•ˆ</li><li>æ¯æ¬¡ä¿®æ”¹äº†web serverçš„ä»£ç ï¼Œéƒ½éœ€è¦é‡æ–°web:runä¸€éæ‰èƒ½æˆåŠŸ</li></ol><p>ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬æ¥å®ç°ã€Œ<strong>å¼€å‘æ—¶ä»£ç çš„å®æ—¶æ›´æ–°</strong>ã€</p>
        <p>&nbsp;</p>
    

</div>


    </div>

    
  </body>
</html>